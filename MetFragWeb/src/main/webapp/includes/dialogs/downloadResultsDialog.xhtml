<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<p:dialog id="downloadResultsDialog" header="Select format" widgetVar="downloadResultsDialog"
		modal="true" resizable="false" >
		<h:panelGrid columns="3" style="margin: 0 auto; vertical-align: top;">
			<h:form id="downloadResultsFormCSV" enctype="multipart/form-data">
				<p:commandLink onclick="PrimeFaces.monitorDownload(startDownloadResults, stopDownloadResults);" ajax="false">
					<h:graphicImage name="images/icons/csv.png" width="64" height="64" />
					<p:fileDownload
						value="#{metFragWebBean.createResultsToDownload('csv')}" />
				</p:commandLink>
			</h:form>
			<h:form id="downloadResultsFormXLS" enctype="multipart/form-data">
				<p:commandLink onclick="PrimeFaces.monitorDownload(startDownloadResults, stopDownloadResults);" ajax="false">
					<h:graphicImage name="images/icons/xls.png" width="64" height="64" />
					<p:fileDownload
						value="#{metFragWebBean.createResultsToDownload('xls')}" />
				</p:commandLink>
			</h:form>
			<h:form id="downloadResultsFormSDF" enctype="multipart/form-data">
				<p:commandLink onclick="PrimeFaces.monitorDownload(startDownloadResults, stopDownloadResults);" ajax="false">
					<h:graphicImage name="images/icons/sdf.png" width="64" height="64" />
					<p:fileDownload
						value="#{metFragWebBean.createResultsToDownload('sdf')}" />
				</p:commandLink>
			</h:form>
		</h:panelGrid>
		<p:dialog id="downloadResultsStatusDialog" modal="true" widgetVar="downloadResultsStatusDialog"
			header="Creating Result File" draggable="false" closable="false" resizable="false">
			<p:graphicImage name="images/ajaxloadingbar.gif" />
		</p:dialog>
		<script type="text/javascript">
			function startDownloadResults() {
				PF('downloadResultsStatusDialog').show();
			}

			function stopDownloadResults() {
				PF('downloadResultsStatusDialog').hide();
			}
		</script>
	</p:dialog>
</h:body>

</html>
